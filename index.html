<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC-7 Mk II EPS Portal</title>
    <style>
        :root {
            --primary: #002344;
            --accent: #ffd700;
            --svc-bg: #e8f5e9;
            --svc-text: #2e7d32;
            --us-bg: #ffebee;
            --us-text: #c62828;
            --card-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }

        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 1300px; margin: auto; }
        
        /* Title Header */
        .header { background: white; padding: 25px; text-align: center; border-radius: 15px; box-shadow: var(--card-shadow); margin-bottom: 20px; border-top: 8px solid var(--primary); }
        h1 { margin: 0; color: var(--primary); font-size: 22px; text-transform: uppercase; letter-spacing: 1px; }

        /* Graphics Summary Dashboard */
        .dashboard { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; }
        .stat-card { background: white; padding: 20px; border-radius: 15px; text-align: center; box-shadow: var(--card-shadow); border-bottom: 5px solid transparent; }
        .stat-val { font-size: 32px; font-weight: bold; display: block; color: var(--primary); }
        .stat-label { font-size: 12px; font-weight: bold; color: #777; text-transform: uppercase; }
        .card-total { border-color: #999; }
        .card-svc { border-color: var(--svc-text); }
        .card-us { border-color: var(--us-text); }

        /* Table Design */
        .table-container { background: white; border-radius: 15px; padding: 20px; box-shadow: var(--card-shadow); overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 1000px; }
        th { padding: 12px; background: #f8f9fa; border-bottom: 2px solid #eee; cursor: pointer; text-align: left; font-size: 11px; text-transform: uppercase; color: #666; }
        th:hover { background: #e9ecef; }

        td { padding: 10px 12px; border-bottom: 1px solid #f0f0f0; font-size: 13px; transition: background 0.3s; }
        
        /* Status Color Row Logic */
        .row-svc { background-color: #fafffa !important; }
        .row-us { background-color: #fffafa !important; }

        select.status-dropdown {
            padding: 6px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 12px;
            border: 1px solid #ddd;
            width: 100%;
        }
        
        /* Dropdown colors */
        .status-dropdown.svc-mode { color: var(--svc-text); border-color: var(--svc-text); }
        .status-dropdown.us-mode { color: var(--us-text); border-color: var(--us-text); }

        .locked-cell { background: #f5f5f5; color: #aaa; cursor: not-allowed; pointer-events: none; }
        td[contenteditable="true"]:focus { background: #fffde7; outline: 1px solid var(--accent); }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>PC-7 Mk II EMERGENCY POWER SUPPLY STATUS</h1>
    </div>

    <div class="dashboard">
        <div class="stat-card card-total">
            <span class="stat-val">25</span>
            <span class="stat-label">Total Units</span>
        </div>
        <div class="stat-card card-svc">
            <span class="stat-val" id="svc-count">11</span>
            <span class="stat-label">Serviceable</span>
        </div>
        <div class="stat-card card-us">
            <span class="stat-val" id="us-count">14</span>
            <span class="stat-label">Unserviceable</span>
        </div>
    </div>

    <div class="table-container">
        <table id="epsTable">
            <thead>
                <tr>
                    <th onclick="sortTable(0)">No</th>
                    <th onclick="sortTable(1)">EPS Serial No</th>
                    <th onclick="sortTable(2)">Status</th>
                    <th onclick="sortTable(3)">Date Due</th>
                    <th onclick="sortTable(4)">Aircraft No</th>
                    <th onclick="sortTable(5)">Remarks</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                </tbody>
        </table>
    </div>
</div>



<script>
    const epsData = [
        ["01", "80379", "Unserviceable", "", "M50-", "U/S (AS/B156//24) (AWD DMD 18/12/25)"],
        ["02", "80919", "Serviceable", "06/04/2026", "M50-21", "-"],
        ["03", "80996", "Serviceable", "17/08/2026", "M50-16", "-"],
        ["04", "81045", "Unserviceable", "", "M50-", "U/S (AS/B171//24) (AWD DMD 28/10/24)"],
        ["05", "81046", "Serviceable", "11/11/2026", "M50-01", "-"],
        ["06", "81262", "Unserviceable", "", "M50-", "U/S (AS/B/111/25) (AWD DMD 02/09/25)"],
        ["07", "81308", "Unserviceable", "", "M50-", "U/S (AS/B/055/25) (AWD DMD 13/06/25)"],
        ["08", "81322", "Unserviceable", "", "M50-", "Sent to Nilai (Loan) (15/08/25)"],
        ["09", "81688", "Unserviceable", "", "M50-", "U/S (AS/B/110/25) (AWD DMD 02/09/25)"],
        ["10", "81829", "Unserviceable", "", "M50-", "U/S (AS/B/112/25) (AWD DMD 02/09/25)"],
        ["11", "83204", "Unserviceable", "", "M50-", "U/S (AS/B109//25) (AWD DMD 11/05/25)"],
        ["12", "83210", "Unserviceable", "", "M50-", "U/S (AS/B/148/25) (AWD DMD 24/11/25)"],
        ["13", "83218", "Serviceable", "04/12/2026", "M50-23", "-"],
        ["14", "83235", "Unserviceable", "", "M50-", "U/S (AS/B169//24) (AWD DMD 28/10/24)"],
        ["15", "83236", "Unserviceable", "", "M50-", "U/S (AS/B/075/25) (AWD DMD 11/08/25)"],
        ["16", "83241", "Serviceable", "22/12/2026", "M50-08", "-"],
        ["17", "83244", "Serviceable", "19/02/2026", "M50-07", "-"],
        ["18", "83411", "Serviceable", "08/07/2026", "M50-02", "-"],
        ["19", "83413", "Unserviceable", "", "M50-", "U/S (AS/B108//25) (AWD DMD 12/08/25)"],
        ["20", "83438", "Unserviceable", "", "M50-", "U/S (AS/B100//25) (AWD DMD 12/08/25)"],
        ["21", "83515", "Serviceable", "11/01/2027", "M50-05", "-"],
        ["22", "83526", "Serviceable", "15/12/2026", "M50-20", "-"],
        ["23", "80992", "Serviceable", "25/03/2026", "M50-22", "-"],
        ["24", "81001", "Serviceable", "05/03/2026", "M50-03", "-"],
        ["25", "81326", "Unserviceable", "", "M50-", "U/S (AS/B/004/26)"]
    ];

    function renderTable() {
        const tableBody = document.getElementById('tableBody');
        tableBody.innerHTML = "";
        epsData.forEach((item, index) => {
            const isSVC = item[2] === "Serviceable";
            let row = `<tr class="${isSVC ? 'row-svc' : 'row-us'}">
                <td>${item[0]}</td>
                <td>${item[1]}</td>
                <td>
                    <select class="status-dropdown ${isSVC ? 'svc-mode' : 'us-mode'}" onchange="updateRowLogic(this)">
                        <option value="Serviceable" ${isSVC ? 'selected' : ''}>Serviceable</option>
                        <option value="Unserviceable" ${!isSVC ? 'selected' : ''}>Unserviceable</option>
                    </select>
                </td>
                <td contenteditable="${isSVC}" class="${isSVC ? '' : 'locked-cell'}">${item[3]}</td>
                <td contenteditable="${isSVC}" class="${isSVC ? '' : 'locked-cell'}">${item[4]}</td>
                <td contenteditable="true">${item[5]}</td>
            </tr>`;
            tableBody.innerHTML += row;
        });
        updateDashboard();
    }

    function updateRowLogic(select) {
        const row = select.closest('tr');
        const status = select.value;
        const dateCell = row.cells[3];
        const acCell = row.cells[4];

        if (status === "Unserviceable") {
            row.className = "row-us";
            select.className = "status-dropdown us-mode";
            acCell.innerText = "";
            dateCell.innerText = "";
            acCell.contentEditable = "false";
            dateCell.contentEditable = "false";
            acCell.classList.add('locked-cell');
            dateCell.classList.add('locked-cell');
        } else {
            row.className = "row-svc";
            select.className = "status-dropdown svc-mode";
            acCell.contentEditable = "true";
            dateCell.contentEditable = "true";
            acCell.classList.remove('locked-cell');
            dateCell.classList.remove('locked-cell');
        }
        updateDashboard();
    }

    function updateDashboard() {
        let svc = 0, us = 0;
        document.querySelectorAll('.status-dropdown').forEach(s => {
            if (s.value === "Serviceable") svc++; else us++;
        });
        document.getElementById('svc-count').innerText = svc;
        document.getElementById('us-count').innerText = us;
    }

    function sortTable(n) {
        var table = document.getElementById("epsTable"), rows, switching = true, i, x, y, shouldSwitch, dir = "asc", switchcount = 0;
        while (switching) {
            switching = false; rows = table.rows;
            for (i = 1; i < (rows.length - 1); i++) {
                shouldSwitch = false;
                x = rows[i].getElementsByTagName("TD")[n];
                y = rows[i + 1].getElementsByTagName("TD")[n];
                let valX = x.querySelector('select') ? x.querySelector('select').value : x.innerText;
                let valY = y.querySelector('select') ? y.querySelector('select').value : y.innerText;
                if ((dir == "asc" && valX > valY) || (dir == "desc" && valX < valY)) { shouldSwitch = true; break; }
            }
            if (shouldSwitch) { rows[i].parentNode.insertBefore(rows[i + 1], rows[i]); switching = true; switchcount++; }
            else if (switchcount == 0 && dir == "asc") { dir = "desc"; switching = true; }
        }
    }

    renderTable();
</script>
</body>
</html>
